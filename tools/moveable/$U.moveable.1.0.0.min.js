/*
    
    $.uite 2.0.0 extension, drag&drop, sortable function
    
    Â© Copyright Leonardo Ciaccio 2015/16
    leonardo.ciaccio@gmail.com

    MIT license
    https://tldrlegal.com/license/mit-license
    
    **********************************************************************
    
    ( $.uite 2.0.0 )[ https://tldrlegal.com/license/mit-license ]
    
*/
!function(e,t,r){"use strict";function o(){$("*").removeClass(r.selectors.startDrag).removeClass(r.selectors.todrag).removeClass(r.selectors.todrop).removeClass(r.selectors.toNotdrop).removeClass(r.selectors.parentTodrop).removeClass(r.selectors.parentNotdrop).removeAttr("draggable")}if(!e||!t)throw new Error("$.uite.tools.moveable require '$.uite' framework");var n="moveable",s="",a=0,i=r.selectors.styleID,l=$("#"+i);(!l||l.length<1)&&(l=$("<style>"),l.attr("id",i).html(r.styles),$("head").append(l)),e.tools.install({badge:$.extend({},r.badge),name:n,fn:{sortable:function(){a=0},moveable:function(){a=1}}},{click:function(){event.preventDefault(),event.stopPropagation();var e=$(event.target);return o(),e.addClass(r.selectors.todrag).attr("draggable","true"),1==a?!1:(e.parent().addClass(r.selectors.parentNotdrop),e.parent().children().not("."+r.selectors.todrag).addClass(r.selectors.toNotdrop),!1)},dblclick:function(){event.preventDefault(),event.stopPropagation();var e=$(event.target);return o(),e.parent().addClass(r.selectors.todrag).attr("draggable","true"),1==a?!1:(e.parent().parent().addClass(r.selectors.parentNotdrop),e.parent().parent().children().not("."+r.selectors.todrag).addClass(r.selectors.toNotdrop),!1)},dragstart:function(e){var t=$(e.target);t.hasClass(r.selectors.startDrag)||t.addClass(r.selectors.startDrag);var o=$("<div>");e.originalEvent.dataTransfer.setData("Text",o.append(t.clone()).html()),s=o.html(),o.remove()},dragenter:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target),o=$("."+r.selectors.startDrag);return t.hasClass(r.selectors.toNotdrop)&&t.parent().hasClass(r.selectors.parentNotdrop)&&0==a?(t.prev("."+r.selectors.startDrag).length>0?t.insertBefore(o[0]):t.insertAfter(o[0]),!1):(1==a&&t.parents("."+r.selectors.startDrag).length<1&&($("."+r.selectors.parentTodrop).removeClass(r.selectors.parentTodrop),$("."+r.selectors.todrop).removeClass(r.selectors.todrop),t.parent().addClass(r.selectors.parentTodrop).children().addClass(r.selectors.todrop)),!1)},dragend:function(e){e.preventDefault(),e.stopPropagation(),o()},drop:function(t){t.preventDefault(),t.stopPropagation();var o=$(t.target),i=$("."+r.selectors.startDrag);try{var l=$.trim(t.originalEvent.dataTransfer.getData("Text"));if(l.length>1&&l!=s&&1==a)return l.match(/^\</gi)||(l=l.replace(/\</gi,"&lt;").replace(/\>/gi,"&gt;"),l="<p>"+l+"</p>"),o.append(l),e.tools[n].onService(),!1}catch(d){return alert("mhhhh error on drop O.o"),!1}return 0==a||o.parents("."+r.selectors.startDrag).length>0||o.hasClass(r.selectors.startDrag)?!1:(i.remove(),void o.append(s))},dragover:function(e){return e.preventDefault(),e.stopPropagation(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"),!1}}),e.tools.uninstall(n,function(){o(),$("#"+r.selectors.styleID).remove()}),e.tools.change(n,function(){o()}),e.tools[n].onService()}(window.$U,window.$I,{badge:{name:"$.uite.tools.moveable",description:"Moveable function for '$.uite' framework",version:"1.0.0",author:"Leonardo Ciaccio",contact:"leonardo.ciaccio@gmail.com",project:""},selectors:{styleID:"uite-moveable-style",startDrag:"suite-move-start-drag",todrag:"suite-move-todrag",todrop:"suite-move-todrop",toNotdrop:"suite-move-not-drop",parentTodrop:"suite-move-parent-todrop",parentNotdrop:"suite-move-parent-not-drop"},styles:"[draggable] {cursor: move;-moz-user-select: none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;-khtml-user-drag: element;-webkit-user-drag: element;}.suite-move-start-drag{opacity: 0.4;}.suite-move-todrag{border: 1px dashed grey!important;cursor: move;}.suite-move-todrop{border: 1px dashed grey!important;}.suite-move-not-drop{border: 1px dashed red!important;padding: 1px!important;}.suite-move-parent-not-drop{border: 3px dashed red!important;padding: 5px!important;}.suite-move-parent-todrop{border: 3px dashed black!important;padding: 5px!important;}"});
//# sourceMappingURL=$U.moveable.1.0.0.min.js.map