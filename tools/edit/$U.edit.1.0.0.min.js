/*
    
    $.uite 2.0.0 extension, edit functions
    
    Â© Copyright Leonardo Ciaccio 2015/16
    leonardo.ciaccio@gmail.com

    MIT license
    https://tldrlegal.com/license/mit-license
    
    **********************************************************************
    
    ( $.uite 2.0.0 )[ https://tldrlegal.com/license/mit-license ]

*/
!function(e,t,r,o){"use strict";if(!e||!t)throw new Error("$.uite.tools.edit require '$.uite' framework");var n="edit";e.tools.install({badge:$.extend({},r.badge),name:n,fn:{paste:function(){if(!e.tools.select||t().selected().length<1)return alert("Please select one or more elements with '$U.tools.select' !");var r=t().selected(),o=$.trim(prompt("Paste here your code or text to append !"));return!o||o.length<1?!1:(t(r).append(o),e.tools[n].onService(),r)},copy:function(){if(!e.tools.select||t().selected().length<1)return alert("Please select one or more elements with '$U.tools.select' !");var r=t().selected();t(r).unSelect(),t(r).toClipBoard()},clone:function(){if(!e.tools.select||t().selected().length<1)return alert("Please select one or more elements with '$U.tools.select' !");var r=t().selected();return t(r).unSelect().each(function(){$(this).clone().insertAfter($(this))}),e.tools[n].onService(),r},toClipBoard:function(e){e=e||"",e=$.trim(e);var t=$("<div>");this.each(function(){t.append($(this).clone())}),e+=t.html(),t.remove();var r=$("<textarea>");return r.height("1px").width("1px"),$("body").append(r),r.val(e).select(),document.execCommand("copy"),r.remove(),this},grab:function(){if(!e.tools.select||t().selected().length<1)return alert("Please select one or more elements with '$U.tools.select' !");var r=t().selected(),a=r.find("[data-task]");return a.length>1&&!confirm("Selected elements have a tasks, grabber remove all tasks for this session, proceed ?")?r:(t().allTask().remove(),t(r).unSelect().removeAttr("contenteditable"),r.find("*").removeAttr("contenteditable"),setTimeout(function(){var t="/* --> grabbed --> */";r.each(function(){var e=$.trim($(this).attr("style"));if(e.length>1){if(e.indexOf(t)>-1)return!0;";"!=e.substr(e.length-1,1)&&(e+=";")}e+=t,$(this).attr("style",e+o.getAllStyles($(this)[0]))}),r.find("*").each(function(){var e=$.trim($(this).attr("style"));if(e.length>1){if(e.indexOf(t)>-1)return!0;";"!=e.substr(e.length-1,1)&&(e+=";")}e+=t,$(this).attr("style",e+o.getAllStyles($(this)[0]))});var a=$("<div>"),s=a.append(r.clone()).html();a.remove(),r.each(function(){var e=$.trim($(this).attr("style"));return e.length>1&&e.indexOf(t)<0?!0:(e=e.split(t)[0],void $(this).attr("style",e))}),r.find("*").each(function(){var e=$.trim($(this).attr("style"));return e.length>1&&e.indexOf(t)<0?!0:(e=e.split(t)[0],void $(this).attr("style",e))}),e.tools[n].onService();window.open("data:text/plain;charset=utf-8,"+encodeURIComponent(s))},2e3),r)},hide:function(){if(!e.tools.select||t().selected().length<1)return alert("Please select one or more elements with '$U.tools.select' !");var r=t().selected();t(r).unSelect(),t(r).toTask()},remove:function(){return!e.tools.select||t().selected().length<1?alert("Please select one or more elements with '$U.tools.select' !"):void(confirm("I suggest you to 'hide' this, if removed can't undo this operation, remove this element ?")&&t().selected().remove())},toTask:function(){var e=t().allTask(),r=e.length>0?e.length:0;return this.each(function(){$(this).attr("data-task")||$(this).attr("data-task",r++).hide()})},undoLastTask:function(){var e=t().allTask(),r=e.length>0?e.length-1:0;return $("[data-task='"+r+"']").removeAttr("data-task").show()},undoAllTasks:function(){var e=t().allTask();return e.removeAttr("data-task").show()},allTask:function(){return $("[data-task]")}}},{dblclick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target);t.attr("contenteditable","true").focus()},blur:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target);t.removeAttr("contenteditable")}}),e.tools.uninstall(n,function(){var e=t().allTask();return e.length>0&&!confirm("If you close this session remove all hidden task, continue ?")?!1:($("*").removeAttr("contenteditable"),void e.remove())}),e.tools[n].onService()}(window.$U,window.$I,{badge:{name:"$.uite.tools.edit",description:"Edit functions for '$.uite' framework",version:"1.0.0",author:"Leonardo Ciaccio",contact:"leonardo.ciaccio@gmail.com",project:""}},{getAllStyles:function(e){for(var t=window.getComputedStyle(e,null),r="",o=t.length,n=0;o>n;n++){var a=t[n],s=t.getPropertyValue(a);s&&(r+=a+":"+s+";")}return r}});
//# sourceMappingURL=$U.edit.1.0.0.min.js.map