/*
    
    $.uite 2.0.0 extension, manage source code
    
    Â© Copyright Leonardo Ciaccio 2015/16
    leonardo.ciaccio@gmail.com

    MIT license
    https://tldrlegal.com/license/mit-license
    
    **********************************************************************
    
    ( $.uite 2.0.0 )[ https://tldrlegal.com/license/mit-license ]

*/
!function(e,t,r){"use strict";function o(){return $.data(document.body,"config")||{}}function n(e){var t=o(),r=$.extend(t,e);$.data(document.body,"config",r)}if(!e||!t)throw new Error("$.uite.tools.file require '$.uite' framework");var a="file";e.tools.install({badge:$.extend({},r.badge),name:a,fn:{snapshot:function(){var e=$("<div>"),t=o();e.append($("html").first().clone());var a=t.doctype||$.trim(prompt("Doctype ?",r.doctype));if(!a||a.length<1)return!1;n({doctype:a});var s=a+e.html();e.remove();var i=window.open();return i.document.write(s),i.document.close(),!0},"export":function(){var e=$("<div>"),t=o();e.append($("html").first().clone());var a=t.doctype||$.trim(prompt("Doctype ?",r.doctype));if(!a||a.length<1)return!1;n({doctype:a});var s=a+e.html();e.remove();var i=t.fileName||$.trim(prompt("File Name ?",r.fileName));if(!i||i.length<1)return!1;n({fileName:i});var l=$("<a>");return l.attr("href","data:text/plain;charset=utf-8,"+encodeURIComponent(s)).attr("download",i),l[0].click(),l[0].remove(),!0},save:function(){try{localStorage.test="Test pass !"}catch(e){return confirm("This browser not support local storage, export to file ?")?t().export():!1}var a=$("<div>"),s=o();a.append($("html").first().clone());var i=s.doctype||$.trim(prompt("Doctype ?",r.doctype));if(!i||i.length<1)return!1;n({doctype:i});var l=i+a.html();a.remove();var c=s.storeName||$.trim(prompt("Name ?",r.storeName));return!c||c.length<1?!1:(n({storeName:c}),localStorage[r.signFile+"-"+c]=l,alert("'"+c+"' saved at "+document.location.href),!0)},saveAs:function(){try{localStorage.test="Test pass !"}catch(e){return confirm("This browser not support local storage, export to file ?")?t().export():!1}var a=$("<div>"),s=o();a.append($("html").first().clone());var i=s.doctype||$.trim(prompt("Doctype ?",r.doctype));if(!i||i.length<1)return!1;n({doctype:i});var l=i+a.html();a.remove();var c=$.trim(prompt("Name ?",s.storeName||r.storeName));return!c||c.length<1?!1:(n({storeName:c}),"undefined"==typeof localStorage[r.signFile+"-"+c]||confirm("This file exist, overwrite ?")?(localStorage[r.signFile+"-"+c]=l,alert("'"+c+"' saved at "+document.location.href),!0):!1)},open:function(){var e=[];try{for(var t in localStorage)if(0==t.indexOf(r.signFile)){var o=t.replace(r.signFile+"-","");e.push(o)}}catch(n){return alert("This browser not support local storage !"),!1}if(e.length<1)return alert("On this location, no files saved !"),!1;var a=$.map(e,function(e,t){return t+" : "+e});a="Digit the number to open :\r\n"+a.join("\r\n");var s=$.trim(prompt(a,"0"));if(!s||s.length<1)return!1;if(s=parseInt(s),!$.isNumeric(s)||0>s||s>e.length-1)return alert("This file not exist !"),!1;var i=localStorage[r.signFile+"-"+e[s]],l=window.open();return l.document.write(i),l.document.close(),!0}}},{}),e.tools.uninstall(a,function(){}),e.tools.change(a,function(){}),e.tools[a].onService()}(window.$U,window.$I,{badge:{name:"$.uite.tools.file",description:"File manipulation function for '$U' framework",version:"1.0.0",author:"Leonardo Ciaccio",contact:"leonardo.ciaccio@gmail.com",project:""},doctype:"<!DOCTYPE html>",fileName:"My.Page.With.$UITE.html",storeName:"My.Page.With.$UITE",signFile:"$UITE-FILE"});
//# sourceMappingURL=$U.file.1.0.0.min.js.map